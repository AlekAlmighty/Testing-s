<!DOCTYPE html>
<html lang="en">
<head>
<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;500;600;700&display=swap" rel="stylesheet">
  <meta charset="UTF-8">
  <title>Breathe Green - Login/Register</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="login.css">

  <style>
    #loading-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: white;
      display: none;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      z-index: 99999;
    }

    .spinner {
      width: 50px;
      height: 50px;
      border: 6px solid #ccc;
      border-top: 6px solid #333;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      100% { transform: rotate(360deg); }
    }
  </style>
</head>

<body>

<div id="loading-screen">
  <div class="breathe-logo">
    <span>Breathe</span>
    <strong>Green</strong>
  </div>

  <div class="bubbles">
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
  </div>

  <p class="loading-text">Breathing life into your login...</p>
</div>

  <div class="container" id="container">
    <div class="form-container login-container">
      <form id="loginForm">
        <h1>Login</h1>
        <input type="email" name="email" placeholder="Email" required>
        <input type="password" name="password" placeholder="Password" required>
        <button type="submit" id="loginButton">Login</button>
        <div id="loginError" class="error-message" style="display:none; color: red; margin-top: 10px;"></div>
        <p>Donâ€™t have an account? <a href="#" id="switchToRegister">Register</a></p>
      </form>
    </div>

    <div class="form-container register-container">
      <form id="registerForm">
        <h1>Register</h1>
        <input type="text" name="fullName" placeholder="Full Name" required>
        <input type="email" name="email" placeholder="Email" required>
        <input type="password" name="password" placeholder="Password" minlength="6" required>
        <input type="password" name="confirmPassword" placeholder="Confirm Password" minlength="6" required>
        <input type="number" name="age" placeholder="Age" min="1" required>
        <select name="gender" required>
          <option value="" disabled selected>Gender</option>
          <option value="male">Male</option>
          <option value="female">Female</option>
          <option value="other">Other</option>
        </select>
        <button type="submit" id="registerButton">Register</button>
        <div id="registerError" class="error-message" style="display:none; color: red; margin-top: 10px;"></div>
        <div id="registerSuccess" class="success-message" style="display:none; color: green; margin-top: 10px;"></div>
        <p>Already have an account? <a href="#" id="switchToLogin">Login</a></p>
      </form>
    </div>

    <aside class="cover-panel" id="cover-panel">
      <div class="cover-content cover-login">
        <h1 class="panel-title">Breathe Green</h1>
        <p class="panel-tagline">Cleaner Lungs, Cleaner Planet</p>
        <div class="panel-content">
          New here? Register to start your journey towards a healthier you and a cleaner planet.
        </div>
      </div>
      <div class="cover-content cover-register">
        <h1 class="panel-title">Welcome Back</h1>
        <p class="panel-tagline">Your progress matters</p>
        <div class="panel-content">
          Already part of Breathe Green? Login and continue your health and eco-friendly journey.
        </div>
      </div>
    </aside>
  </div>

  <script type="module" src="login.js"></script>

  <script>
    function showLoading() {
      const loader = document.getElementById("loading-screen");
      if (loader) {
        loader.style.display = "flex";
      }
    }

    document.getElementById("loginForm").addEventListener("submit", function () {
      showLoading();
    });
  </script>

  <!-- AI Assessment Modal (shown on first login only) -->
  <div id="ai-assessment-modal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.6); align-items:center; justify-content:center; z-index:100000;">
    <div style="background:#fff; padding:20px; max-width:520px; width:94%; border-radius:8px; box-shadow:0 6px 24px rgba(0,0,0,0.2);">
      <h2 style="margin-top:0;">Quick Health Assessment</h2>
      <p>This short assessment helps us personalise feedback for your smoking history.</p>
      <form id="aiAssessmentForm">
        <label>Do you currently smoke? <select name="currentSmoker" required><option value="yes">Yes</option><option value="no">No</option></select></label>
        <br><br>
        <label>Years smoked (0 if never): <input type="number" name="years" min="0" value="0" required></label>
        <br><br>
        <label>Cigarettes per day: <input type="number" name="cigsPerDay" min="0" value="0" required></label>
        <br><br>
        <label>Motivation to quit: <select name="motivation" required><option value="low">Low</option><option value="medium">Medium</option><option value="high">High</option></select></label>
        <br><br>
        <div style="display:flex; gap:8px; justify-content:flex-end;">
          <button type="button" id="aiAssessmentCancel">Skip</button>
          <button type="submit" id="aiAssessmentSubmit">Get feedback</button>
        </div>
      </form>
      <div id="aiAssessmentResult" style="margin-top:12px; display:none;"></div>
    </div>
  </div>

</body>
</html>
